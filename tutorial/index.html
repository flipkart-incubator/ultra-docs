



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-0.17.3, mkdocs-material-2.7.3">
    
    
      
        <title>Tutorial - Ultra documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.8d40d89b.css">
      
    
    
      <script src="../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <a href="#tutorial" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href=".." title="Ultra documentation" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Ultra documentation
              </span>
              <span class="md-header-nav__topic">
                Tutorial
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <span class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </span>
    Ultra documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Tutorial
      </label>
    
    <a href="./" title="Tutorial" class="md-nav__link md-nav__link--active">
      Tutorial
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#tutorial" title="Tutorial" class="md-nav__link">
    Tutorial
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-decide-your-ui-platform" title="Step 1 - Decide your UI platform" class="md-nav__link">
    Step 1 - Decide your UI platform
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#react-native" title="React Native" class="md-nav__link">
    React Native
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#webview" title="Webview" class="md-nav__link">
    Webview
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-integrate-js-sdk" title="Step 2 - Integrate JS SDK" class="md-nav__link">
    Step 2 - Integrate JS SDK
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-fetch-user-data" title="Step 3 - Fetch user data" class="md-nav__link">
    Step 3 - Fetch user data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-4-auto-login-the-user" title="Step 4 - Auto login the user" class="md-nav__link">
    Step 4 - Auto login the user
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-5-payment" title="Step 5 - Payment" class="md-nav__link">
    Step 5 - Payment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-6-oms-integration" title="Step 6 - OMS integration" class="md-nav__link">
    Step 6 - OMS integration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#demo" title="Demo" class="md-nav__link">
    Demo
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../onboarding/" title="Onboarding" class="md-nav__link">
      Onboarding
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../flows/" title="Flow diagrams" class="md-nav__link">
      Flow diagrams
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../clients/" title="Client Side API" class="md-nav__link">
      Client Side API
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Server Side API
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Server Side API
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../backend/" title="Basic APIs" class="md-nav__link">
      Basic APIs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../oms/" title="OMS" class="md-nav__link">
      OMS
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../demo/" title="Demo" class="md-nav__link">
      Demo
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../contact/" title="Contact Us" class="md-nav__link">
      Contact Us
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../announcement/" title="Announcements" class="md-nav__link">
      Announcements
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#tutorial" title="Tutorial" class="md-nav__link">
    Tutorial
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-decide-your-ui-platform" title="Step 1 - Decide your UI platform" class="md-nav__link">
    Step 1 - Decide your UI platform
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#react-native" title="React Native" class="md-nav__link">
    React Native
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#webview" title="Webview" class="md-nav__link">
    Webview
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-integrate-js-sdk" title="Step 2 - Integrate JS SDK" class="md-nav__link">
    Step 2 - Integrate JS SDK
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-fetch-user-data" title="Step 3 - Fetch user data" class="md-nav__link">
    Step 3 - Fetch user data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-4-auto-login-the-user" title="Step 4 - Auto login the user" class="md-nav__link">
    Step 4 - Auto login the user
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-5-payment" title="Step 5 - Payment" class="md-nav__link">
    Step 5 - Payment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-6-oms-integration" title="Step 6 - OMS integration" class="md-nav__link">
    Step 6 - OMS integration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#demo" title="Demo" class="md-nav__link">
    Demo
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>Tutorial</h1>
                
                <h2 id="tutorial">Tutorial</h2>
<p>This tutorial will help you integrate your service into the Ultra platform. If you dont like to read instructions and want to tinker around first, head over to the <a href="../demo/">demo</a> to open the playground app. You can open it on your browser to understand how the APIs are implemented.</p>
<h3 id="step-1-decide-your-ui-platform">Step 1 - Decide your UI platform</h3>
<p>To start building an app on Ultra, lets first decide whether you want to build it on <a href="https://facebook.github.io/react-native/">React native platform</a> or on HTML/PWA.
Ultra supports both containers. Here's a brief comparison of the platforms.</p>
<table>
<thead>
<tr>
<th><strong>React native</strong></th>
<th><strong>HTML</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>Code in JS</td>
<td>Code in JS</td>
</tr>
<tr>
<td>Awesome performance</td>
<td>Decent performance</td>
</tr>
<tr>
<td>Very optimized for mobile</td>
<td>Not highly optimized</td>
</tr>
<tr>
<td>Bundle is delivered from FK CDN, only differential components are downloaded, and is cached within the FK app</td>
<td>Bundle and assets follow cache-control headers and might be slower to render even from cache</td>
</tr>
</tbody>
</table>
<h4 id="react-native"><em>React Native</em></h4>
<p>If you choose React native, Ultra will pull in your react native bundle from your github repository, and then deliver it to Flipkart app over-the-air. React native JS bundles are delivered to Flipkart app via <a href="https://github.com/Flipkart/DUS">DUS</a>. We highly encourage you to visit the github page to understand how it works.</p>
<p>The only limitations are :</p>
<ul>
<li>
<p>You cannot use any other extra native bridges which are not exposed by Flipkart. </p>
</li>
<li>
<p>You cannot use local assets like images/videos within the bundle since only JS is delivered over-the-air. All assets have to be uploaded to your CDN manually and referenced within the JS code.</p>
</li>
</ul>
<p>Once DUS fetches your bundle within the Flipkart app, your react native experience will be loaded within a React Fragment and from there on you can navigate to other pages accordingly.</p>
<h4 id="webview"><em>Webview</em></h4>
<p>If you choose to build via HTML/PWA, then ultra will launch your webpage inside Android's webview. If you have your existing mobile website, you can choose to reuse it for Ultra, by only choosing to make small changes. The only catch is that you are not allowed to navigate away from your main domain.</p>
<h3 id="step-2-integrate-js-sdk">Step 2 - Integrate JS SDK</h3>
<p>Based on the platform you choose, you have to <a href="../clients/#step-1">add the Ultra Javascript SDK to your HTML/React-native app</a>. This SDK will provide access to Ultra specific bridge methods needed for Oauth/Login and Payments. Once you add the dependency for the SDK, you need to <a href="../clients/#step-2">initialize the SDK with your clientId</a>.</p>
<p><a href="../contact/">Contact flipkart</a> to generate a <code>clientId</code> and <code>secret</code> needed to access Ultra APIs. For playing around with the APIs you can use <a href="../demo/#test">our test credentials</a>.</p>
<p>Most apps require its users to enter their email address and name before proceeding. We all know that asking the user to login to your app even if he is logged in on Flipkart app is not a good idea. Hence Ultra encourages apps to automatically login the user with their consent.</p>
<p>In this step we will learn how to fetch user details from flipkart securely by asking the user to grant permissions to their data.</p>
<p>This section will also introduce you to terms which are common in the Oauth world like <code>Granted Scopes</code>  and <code>Grant tokens</code>.</p>
<p>The first step in fetching user data is to <a href="../clients/#permissions-module">call <code>getToken</code></a> and supply the list of user resources you like to fetch. This will render the Allow/Deny permission prompt to user, once allowed, the <code>Promise</code> which contains the <code>token</code> is resolved.</p>
<p>When you call <code>getToken</code> the following bottomsheet is shown to the user.
<img alt="Permission prompt" src="../img/permissions.png" /></p>
<p>Use flags like <code>shouldVerify</code> and <code>isMandatory</code> (<a href="../clients/#permissions-module">details here</a>) to control whether you want the permission mandatorily and also whether the resources like email and phone should be OTP verfied on Flipkart's end. Most phone numbers on Flipkart systems are OTP verified, so they would not need to verify their phone number within the <code>getToken</code> flow. For users who arent OTP verified, they will be shown a screen to verify their phone numbers before the control comes back to you. </p>
<h3 id="step-3-fetch-user-data">Step 3 - Fetch user data</h3>
<p>Send the token to you server using a AJAX call or any other mechanism you prefer. This token can be used by the server to get an access token which we will learn in the next step.</p>
<p>On your server side, use this grant token and fetch the access token by making a call to <code>/1/authorization/auth</code>. More details <a href="../backend/#access-token-flow">here</a>.
Use the access token and fetch resources like <code>user.email</code> and <code>user.mobile</code>. More details <a href="../backend/#resource-fetching-flow">here</a>.</p>
<p><strong>Note</strong> : Although the APIs to fetch user data are available on client side also (since they are REST APIs), make sure you always fetch user data on server side and not on the client side to avoid security risks like MITM attacks.</p>
<h3 id="step-4-auto-login-the-user">Step 4 - Auto login the user</h3>
<p>Use the value of <code>mobileNumber</code> in combination with the <code>isVerified</code> flag to automatically log the user in. You could now set a cookie which prevents calls to <code>getToken</code> from happening each time the user opens your app. This completes the Login flow. Its highly recommended that you do this towards the end of the user funnel to avoid dropouts.</p>
<h3 id="step-5-payment">Step 5 - Payment</h3>
<p>Follow steps in <a href="../backend/#payment-flow">payment flow</a> to create a payment token and to <code>startPayment</code> and once payment is successful, redirect the user to your own order confirmation page.</p>
<p>The money will reach the MIDs which have to be configured. Contact Flipkart so that your MID onboarding is done before the integration starts. This process takes a significant amount of time.</p>
<p>The following screen is shown when you call <code>startPayment</code> :</p>
<p><img alt="Payment" src="../img/payments.jpg" /></p>
<p>Also integrate with <a href="../backend/#refund">refund API</a> as per your business requirements.</p>
<h3 id="step-6-oms-integration">Step 6 - OMS integration</h3>
<p>Now that the user has paid you, he will want to check for the status of your order using My Orders page in the Flipkart app.
To do this you have to integrate with <a href="../oms/">Flipkart OMS APIs</a> to let us know the status of an Order. A successful payment need not always mean a successful order. Hence a separate API call is required for this. More info <a href="../oms/">here</a>. These flows will also help Flipkart's Customer service agent answer customer queries/calls in a more meaningful manner.</p>
<blockquote>
<p>This is a MANDATORY step and not optional. Although this step has no UI implications, your app cannot go live unless this data is being sent to our server.</p>
</blockquote>
<h3 id="demo">Demo</h3>
<p>Checkout the <a href="../demo/">demo page</a> to see this flow in action.</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href=".." title="Home" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Home
              </span>
            </div>
          </a>
        
        
          <a href="../onboarding/" title="Onboarding" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Onboarding
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="http://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.b438e6c5.js"></script>
      
      <script>app.initialize({version:"0.17.3",url:{base:".."}})</script>
      
    
    
      
    
  </body>
</html>