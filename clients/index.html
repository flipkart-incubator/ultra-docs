



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-0.17.4, mkdocs-material-2.9.2">
    
    
      
        <title>Client Side API - Ultra documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.ba0fd1a6.css">
      
      
    
    
      <script src="../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#ultra-client-side-sdk" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href=".." title="Ultra documentation" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Ultra documentation
              </span>
              <span class="md-header-nav__topic">
                Client Side API
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <span class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </span>
    Ultra documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../tutorial/" title="Tutorial" class="md-nav__link">
      Tutorial
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../onboarding/" title="Onboarding" class="md-nav__link">
      Onboarding
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../flows/" title="Flow diagrams" class="md-nav__link">
      Flow diagrams
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Client Side API
      </label>
    
    <a href="./" title="Client Side API" class="md-nav__link md-nav__link--active">
      Client Side API
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" title="Overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-started" title="Getting Started" class="md-nav__link">
    Getting Started
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#integration-steps" title="Integration steps:" class="md-nav__link">
    Integration steps:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-1" title="Step 1)" class="md-nav__link">
    Step 1)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2" title="Step 2)" class="md-nav__link">
    Step 2)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modules" title="Modules" class="md-nav__link">
    Modules
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#permissions-module" title="Permissions Module" class="md-nav__link">
    Permissions Module
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#navigation-module" title="Navigation Module" class="md-nav__link">
    Navigation Module
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#contacts-module-from-flipkart-app-v63-ultra-v141" title="Contacts Module (from flipkart app v6.3, ultra v1.4.1)" class="md-nav__link">
    Contacts Module (from flipkart app v6.3, ultra v1.4.1)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#handling-errors" title="Handling Errors" class="md-nav__link">
    Handling Errors
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#detecting-flipkart-environment" title="Detecting flipkart environment" class="md-nav__link">
    Detecting flipkart environment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#detecting-presence-of-a-certain-feature" title="Detecting presence of a certain feature" class="md-nav__link">
    Detecting presence of a certain feature
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#handling-file-uploads-and-downloads-from-flipkart-app-v63-ultra-v137" title="Handling file uploads and downloads (from flipkart app v6.3, ultra v1.3.7)" class="md-nav__link">
    Handling file uploads and downloads (from flipkart app v6.3, ultra v1.3.7)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../backend/" title="Server Side API" class="md-nav__link">
      Server Side API
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../demo/" title="Demo" class="md-nav__link">
      Demo
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../contact/" title="Contact Us" class="md-nav__link">
      Contact Us
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" title="Overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-started" title="Getting Started" class="md-nav__link">
    Getting Started
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#integration-steps" title="Integration steps:" class="md-nav__link">
    Integration steps:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-1" title="Step 1)" class="md-nav__link">
    Step 1)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2" title="Step 2)" class="md-nav__link">
    Step 2)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modules" title="Modules" class="md-nav__link">
    Modules
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#permissions-module" title="Permissions Module" class="md-nav__link">
    Permissions Module
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#navigation-module" title="Navigation Module" class="md-nav__link">
    Navigation Module
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#contacts-module-from-flipkart-app-v63-ultra-v141" title="Contacts Module (from flipkart app v6.3, ultra v1.4.1)" class="md-nav__link">
    Contacts Module (from flipkart app v6.3, ultra v1.4.1)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#handling-errors" title="Handling Errors" class="md-nav__link">
    Handling Errors
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#detecting-flipkart-environment" title="Detecting flipkart environment" class="md-nav__link">
    Detecting flipkart environment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#detecting-presence-of-a-certain-feature" title="Detecting presence of a certain feature" class="md-nav__link">
    Detecting presence of a certain feature
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#handling-file-uploads-and-downloads-from-flipkart-app-v63-ultra-v137" title="Handling file uploads and downloads (from flipkart app v6.3, ultra v1.3.7)" class="md-nav__link">
    Handling file uploads and downloads (from flipkart app v6.3, ultra v1.3.7)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="ultra-client-side-sdk">Ultra Client Side SDK</h1>
<h2 id="overview">Overview</h2>
<p>This SDK enables developers to build applications that run inside Flipkart app.</p>
<p>All the methods mentioned here will work with both React Native and Webview. 
All the methods are asynchronous in nature and will always return a promise that gets resolved with the values. Fire and forget calls are an exception where you may not care about the response.</p>
<p>Note: Not open to all, access enabled only for partners.</p>
<h2 id="getting-started">Getting Started</h2>
<h3 id="integration-steps">Integration steps:</h3>
<h3 id="step-1">Step 1)</h3>
<p>If using node, add this repository as an npm package</p>
<div class="codehilite"><pre><span></span>npm install --save fk-platform-sdk
</pre></div>


<p>Alternatively, you can also include the following script directly:</p>
<div class="codehilite"><pre><span></span><span class="nl">http</span><span class="p">:</span><span class="c1">//img1a.flixcart.com/linchpin-web/fk-platform-sdk/fkext-browser-min@0.1.5.js </span>

<span class="p">(</span><span class="n">Version</span> <span class="mf">0.1.5</span><span class="p">)</span>
</pre></div>


<h3 id="step-2">Step 2)</h3>
<p>Import SDK and create a new platform instance. You will need to provide clientId given to you by Flipkart.</p>
<p>In Node Environment:</p>
<div class="codehilite"><pre><span></span><span class="kr">import</span> <span class="nx">FKPlatform</span> <span class="nx">from</span> <span class="s2">&quot;fk-platform-sdk&quot;</span>
<span class="kd">let</span> <span class="nx">fkPlatform</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FKPlatform</span><span class="p">(</span><span class="nx">clientId</span><span class="p">);</span>
</pre></div>


<p>In Browser:</p>
<div class="codehilite"><pre><span></span><span class="kd">var</span> <span class="nx">fkPlatform</span> <span class="o">=</span> <span class="nx">FKExtension</span><span class="p">.</span><span class="nx">newPlatformInstance</span><span class="p">(</span><span class="nx">clientID</span><span class="p">);</span>
</pre></div>


<p>Post this you can start using modules.</p>
<p>Note: You should call <code>FKPlatform.isPlatformAvailable()</code> or, <code>window.FKExtension &amp;&amp; FKExtension.isPlatformAvailable()</code> to check if you're inside Flipkart platform. It is recommended not to do any checks in partner code.</p>
<h2 id="modules">Modules</h2>
<h3 id="permissions-module">Permissions Module</h3>
<div class="codehilite"><pre><span></span><span class="kd">let</span> <span class="nx">permissionsModule</span> <span class="o">=</span> <span class="nx">fkPlatform</span><span class="p">.</span><span class="nx">getModuleHelper</span><span class="p">().</span><span class="nx">getPermissionsModule</span><span class="p">()</span>

<span class="c1">//To get scopes:</span>
<span class="kr">const</span> <span class="nx">SCOPES</span> <span class="o">=</span> <span class="nx">permissionsModule</span><span class="p">.</span><span class="nx">getScopes</span><span class="p">();</span>
</pre></div>


<p><strong>Available Scopes:</strong></p>
<div class="codehilite"><pre><span></span>SCOPES.USER_EMAIL,
SCOPES.USER_MOBILE,
SCOPES.USER_NAME
</pre></div>


<p><strong>Methods:</strong></p>
<div class="codehilite"><pre><span></span>getToken: (permissions: ScopeAccessRequest[]) =&gt; Promise&lt;NativeModuleResponse&lt;PermissionsManagerResponse&gt;&gt;
</pre></div>


<p>Relevant interfaces:</p>
<div class="codehilite"><pre><span></span><span class="kr">interface</span> <span class="nx">ScopeAccessRequest</span> <span class="p">{</span>
    <span class="nx">scope</span><span class="o">:</span> <span class="nx">Scopes</span><span class="p">;</span>
    <span class="nx">isMandatory</span><span class="o">?:</span> <span class="kr">boolean</span><span class="p">;</span>
    <span class="nx">shouldVerify</span><span class="o">?:</span> <span class="kr">boolean</span><span class="p">;</span>
<span class="p">}</span>

<span class="kr">interface</span> <span class="nx">NativeModuleResponse</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="nx">result</span><span class="o">:</span> <span class="nx">T</span><span class="p">,</span>
    <span class="nx">grantToken</span><span class="o">?:</span> <span class="nx">string</span> <span class="o">|</span> <span class="kc">null</span>
<span class="p">}</span>

<span class="kr">interface</span> <span class="nx">PermissionsManagerResponse</span> <span class="p">{</span> <span class="p">[</span><span class="nx">key</span><span class="o">:</span> <span class="nx">Scopes</span><span class="p">]</span><span class="o">:</span> <span class="kr">boolean</span><span class="p">;</span> <span class="p">}</span>
</pre></div>


<p><strong>Sample</strong></p>
<div class="codehilite"><pre><span></span><span class="kd">var</span> <span class="nx">scopeReq</span> <span class="o">=</span> <span class="p">[{</span><span class="s2">&quot;scope&quot;</span><span class="o">:</span><span class="s2">&quot;user.email&quot;</span><span class="p">,</span><span class="s2">&quot;isMandatory&quot;</span><span class="o">:</span><span class="kc">true</span><span class="p">,</span><span class="s2">&quot;shouldVerify&quot;</span><span class="o">:</span><span class="kc">false</span><span class="p">},{</span><span class="s2">&quot;scope&quot;</span><span class="o">:</span><span class="s2">&quot;user.mobile&quot;</span><span class="p">,</span><span class="s2">&quot;isMandatory&quot;</span><span class="o">:</span><span class="kc">false</span><span class="p">,</span><span class="s2">&quot;shouldVerify&quot;</span><span class="o">:</span><span class="kc">false</span><span class="p">},{</span><span class="s2">&quot;scope&quot;</span><span class="o">:</span><span class="s2">&quot;user.name&quot;</span><span class="p">,</span><span class="s2">&quot;isMandatory&quot;</span><span class="o">:</span><span class="kc">false</span><span class="p">,</span><span class="s2">&quot;shouldVerify&quot;</span><span class="o">:</span><span class="kc">false</span><span class="p">}];</span>
<span class="nx">fkPlatform</span><span class="p">.</span><span class="nx">getModuleHelper</span><span class="p">().</span><span class="nx">getPermissionsModule</span><span class="p">().</span><span class="nx">getToken</span><span class="p">(</span><span class="nx">scopeReq</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span>
<span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Your grant token is: &quot;</span> <span class="o">+</span> <span class="nx">e</span><span class="p">.</span><span class="nx">grantToken</span><span class="p">);</span>
<span class="p">}).</span><span class="k">catch</span><span class="p">(</span>
<span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>


<p><code>isMandatory</code> is a boolean which says whether you want the scope to be mandatorily filled by the user</p>
<p>additionally <code>shouldVerify</code> is boolean which says whether you want the scope to be mandatorily verified as well</p>
<p>for e.g if you call <code>getToken(['scope':'user.email', 'isMandatory':true, 'shouldVerify':true])</code>, then that means user cannot grant permissions without filling his email address and also verifying it. You can use this on situations where you know that he user has an unverified email address and want to trigger email verification for the user.
Note that the flags <code>isMandatory</code> and <code>shouldVerify</code> should be set to <code>true</code> only when you ABSOLUTELY need an email address which has to be verified as well, because you could see a significant drop off of permission grants when such constraints are imposed on users. </p>
<p>Also note that the permission popup has a special behaviour when a single scope is requested and also has a unverified value prefilled by the user. For e.g, when you ask permission for a user.email scope, and the user already has an unverified email address in our system, then the UI will automatically initiate the email verfication flow. This is done to avoid an extra click for the user.</p>
<p>The method <code>getToken</code> returns you both list of allowed and rejected permissions which depend on user response. It also returns an access token which you should be passing to your server using which it can hit Flipkart api to read relevant info. For security reasons secure info should only be read server to server using given grantToken.</p>
<p>Promise resolution : 
Promise fails and enters the <code>catch</code> block only if the user dismisses the permission popup (bottomsheet) or the SDK network calls failed.
If user denies a permission, the promise will be resolved successfully and you get a <code>grantToken</code>.
This is because there could be partial permission denial as well. For e.g user denied phone number, but granted email address
Hence all the denials as well as accepts will still be treated as success from a token generation point of view.
If you want to check if user denied a permission, you can check the <code>NativeModuleResponse</code> result to see if the permissions are granted or not.</p>
<p>If the promise fails, Catch block function is invoked with an object which has <code>message</code> and <code>code</code>.
Possible errors are : </p>
<div class="codehilite"><pre><span></span>ERROR_CODE_UNKNOWN = 0;
ERROR_CODE_NETWORK_ERROR = 1001;
ERROR_CODE_JSON_PARSE_ERROR = 1002;
ERROR_CODE_INVALID_PERMISSIONS = 1003;
ERROR_CODE_USER_DISMISS = 1004;
ERROR_CODE_BAD_PERMISSION_REQUEST = 1005;
</pre></div>


<h3 id="navigation-module">Navigation Module</h3>
<p>Common methods will enabled application to control their exit behaviour and deeplink into other parts of the app.</p>
<div class="codehilite"><pre><span></span><span class="kd">let</span> <span class="nx">navigationModule</span> <span class="o">=</span> <span class="nx">fkPlatform</span><span class="p">.</span><span class="nx">getModuleHelper</span><span class="p">().</span><span class="nx">getNavigationModule</span><span class="p">()</span>
</pre></div>


<p><strong>Methods:</strong></p>
<p><code>exitSession(): void</code></p>
<p>Closes the application and takes user back to the page from where the app was launched.</p>
<p><code>exitToHomePage(): void</code></p>
<p>Closes the application and takes user to Flipkart homepage.</p>
<p><code>startPayment(paymentToken: string): void</code></p>
<p>Launches Flipkart payment screen for given token.</p>
<p><code>clearHistory()?: void</code></p>
<p>Clears both forward and backward history such that only the existing page remains.</p>
<h3 id="contacts-module-from-flipkart-app-v63-ultra-v141">Contacts Module (from flipkart app v6.3, ultra v1.4.1)</h3>
<p>Helps in launching a UI that allows user to select a contact from his address book.</p>
<div class="codehilite"><pre><span></span><span class="kd">let</span> <span class="nx">contactModule</span> <span class="o">=</span> <span class="nx">fkPlatform</span><span class="p">.</span><span class="nx">getModuleHelper</span><span class="p">().</span><span class="nx">getContactsModule</span><span class="p">()</span>
</pre></div>


<p><strong>Methods:</strong></p>
<p><code>pickPhoneNumber(): Promise&lt;NativeModuleResponse&lt;Contact&gt;&gt;</code></p>
<p>Launches UI to pick a phone number and returns the same.</p>
<p><code>getContactInfo(phoneNumbers: string[]): Promise&lt;NativeModuleResponse&lt;{[key: string]: Contact;}&gt;&gt;</code></p>
<p>Fetches names and other info against given list of phone numbers. Keys of the returned map will be given phone numbers. </p>
<p>Relevant types:</p>
<div class="codehilite"><pre><span></span><span class="kr">interface</span> <span class="nx">NativeModuleResponse</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="nx">result</span><span class="o">:</span> <span class="nx">T</span><span class="p">,</span>
    <span class="nx">grantToken</span><span class="o">?:</span> <span class="nx">string</span> <span class="o">|</span> <span class="kc">null</span>
<span class="p">}</span>

<span class="kr">interface</span> <span class="nx">Contact</span> <span class="p">{</span>
    <span class="nx">name</span><span class="o">:</span> <span class="nx">string</span>
    <span class="nx">phoneNumber</span><span class="o">:</span> <span class="nx">string</span>
<span class="p">}</span>
</pre></div>


<h3 id="handling-errors">Handling Errors</h3>
<p>Every promise reject contains an error code and a message:
Type:</p>
<div class="codehilite"><pre><span></span><span class="kr">interface</span> <span class="nx">NativeModuleError</span> <span class="p">{</span>
    <span class="nx">message</span><span class="o">:</span> <span class="nx">string</span><span class="p">;</span>
    <span class="nx">errorCode</span><span class="o">:</span> <span class="nx">number</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">Codes</span><span class="o">:</span>
<span class="mi">0</span><span class="o">:</span> <span class="nx">Unknown</span> <span class="nx">error</span>
</pre></div>


<h3 id="detecting-flipkart-environment">Detecting flipkart environment</h3>
<p>If you want to detect if your webpage is running within Flipkart's ultra environment, you have three ways.
1. [PREFERRED] Use JS SDK's <code>FKPlatform.isPlatformAvailable()</code> method.
2. Use the user agent which contains "Ultra". This method is useful if you want to inject the JS SDK only when running within flipkart's ultra environment. An example user agent string 
<code>Mozilla/5.0 (Linux; Android 8.0.0; Android SDK built for x86 Build/OSR1.170901.008; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/58.0.3029.125 Mobile Safari/537.36 [Flipkart/com.flipkart.android/850000/5.16/UltraSDK/4/1.4.2]</code>
Note that if you have service workers making requests, this user agent will not be present.
3. Use X-Requested-With header which will contain the value 'com.flipkart.android'. This will work for all requests including service workers. This is the least preferred method.</p>
<h3 id="detecting-presence-of-a-certain-feature">Detecting presence of a certain feature</h3>
<p>User agent string in ultra is of the following format:
<code>Mozilla/5.0 (Linux; Android 8.0.0; Android SDK built for x86 Build/OSR1.170901.008; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/58.0.3029.125 Mobile Safari/537.36 [Flipkart/com.flipkart.android/850000/5.16/UltraSDK/4/1.4.2]</code>
In the above user agent string, 5.16 is the version name and 850000 is version code for flipkart app, 1.4.2 is version name and 4 is version code for ultra SDK. </p>
<p>Based on just the ultra version name (1.4.2) you can check if certain newly added modules are present or not.</p>
<h3 id="handling-file-uploads-and-downloads-from-flipkart-app-v63-ultra-v137">Handling file uploads and downloads (from flipkart app v6.3, ultra v1.3.7)</h3>
<p>Starting with Flipkart app version 6.3, ultra version 1.3.7, file uploads and downloads are present.
For downloads, ensure that 'download' attribute is not used. For e.g <code>&lt;a href='abcd.pdf' download='xyz.pdf' /&gt;</code> will not work.
Also apis like FileSaver.js or blob based APIs dont work due to limitations in webview.
For uploads, there are no restrictions.</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../flows/" title="Flow diagrams" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Flow diagrams
              </span>
            </div>
          </a>
        
        
          <a href="../backend/" title="Server Side API" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Server Side API
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.a59e2a89.js"></script>
      
      <script>app.initialize({version:"0.17.4",url:{base:".."}})</script>
      
    
    
      
    
  </body>
</html>